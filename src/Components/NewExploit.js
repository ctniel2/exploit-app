import React, {Component} from 'react';
import Menu from './Menu';
import TextField from "@material-ui/core/TextField";
import Button from "@material-ui/core/Button";

class NewExploit extends Component {
    constructor(props) {
        super(props);
        this.state = {
            description: '',
            author: '',
            platform: '',
            type: '',
            port: ''
        }
    }

    update = (event) => {
        console.log(event.target.value);
        this.setState({
            [event.target.id]: event.target.value
        })
    };

    submit = async (event) => {
        let data = {
            description: this.state.description,
            author: this.state.author,
            platform: this.state.platform,
            type: this.state.type,
            port: this.state.port
        };

        await this.props.post('/addExploit', data)
            .then(result => {
                console.log(result.result);
            })
            .catch(err => {
                console.log(err);
            })
    };

    render() {
        return (
            <div>
            <Menu logout={this.props.logout}/>
        <form noValidate
        style={{margin:'15px'}}
        autoComplete="off">
            <TextField id="description" label="Description" variant="outlined" value={this.state.description} onChange={this.update} />
            <TextField id="author" label="Author" variant="outlined" value={this.state.author} onChange={this.update} />
            <TextField id="platform" label="Platform" variant="outlined" value={this.state.platform} onChange={this.update}/>
            <TextField id="type" label="Type" variant="outlined" value={this.state.type} onChange={this.update}/>
            <TextField id="port" label="Port" variant="outlined" value={this.state.port} onChange={this.update}/>
        </form>
        <Button variant="contained" onClick={this.submit}>Add Exploit</Button>
            </div>
    )
    }
}

export default NewExploit;
