import React, {Component} from 'react';
import Menu from './Menu';

class Shodan extends Component {
    constructor(props) {
        super(props);
        this.state = {
            shodanIP: '',
            hostnames: '',
            transport: '',
            city: '',
            country: '',
            domains: '',
            org: '',
            os: '',
            port: '',
            isp: '',
            name: ''
        }
    }

    componentDidMount() {
        let ip = this.props.match.params.shodanIP;
        this.setup(ip);
    }

    setup = async (ip) => {
        await this.props.get('/getShodan', [{name: 'ip', value: ip}])
            .then(result => {
                let shodan = result.result;
                this.setState({
                    shodanIP: shodan.ip,
                    hostnames: shodan.hostnames,
                    transport: shodan.transport,
                    city: shodan.city,
                    country: shodan.country,
                    domains: shodan.domains,
                    org: shodan.org,
                    os: shodan.os,
                    port: shodan.port,
                    isp: shodan.isp,
                    name: shodan.name
                });
            });
    };

    render() {
        return (
            <div>
            <Menu logout={this.props.logout}/>
        <h1>Shodan Exploit Page</h1>
        <h2>{this.state.name}</h2>
        <h4>{this.state.shodanIP}</h4>
        <h4>{this.state.hostnames}</h4>
        <h4>{this.state.transport}</h4>
        <h4>{this.state.city}</h4>
        <h4>{this.state.country}</h4>
        <h4>{this.state.domains}</h4>
        <h4>{this.state.org}</h4>
        <h4>{this.state.os}</h4>
        <h4>{this.state.port}</h4>
        <h4>{this.state.isp}</h4>
        </div>
    )
    }
}

export default Shodan;
