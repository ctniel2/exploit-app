import React, {Component} from 'react';
import Menu from './Menu';

class Exploit extends Component {
  constructor(props) {
    super(props);
    this.state = {
      exploitID: '',
      description: '',
      author: '',
      platform: '',
      type: '',
      port: '',
      date: '',
      file: '',
    }
  }

  componentDidMount() {
    let id = this.props.match.params.exploitID;
    this.setup(id);
  }

  setup = async (id) => {
    await this.props.get('/getExploit', [{name: 'id', value: id}])
        .then(result => {
          console.log(result);
          let exploit = result.result;
          this.setState({
            exploitID: exploit.id,
            description: exploit.description,
            author: exploit.author,
            platform: exploit.type,
            type: exploit.platform,
            port: exploit.port,
            date: exploit._date,
            file: exploit.file
          });
        });
  };

  render() {
    return (
      <div>
        <Menu logout={this.props.logout}/>
        <h1>Exploit Page</h1>
        <h2>{this.state.description}</h2>
        <h4>{this.state.author}</h4>
        <h4>{this.state.platform}</h4>
        <h4>{this.state.type}</h4>
        <h4>{this.state.port}</h4>
        <h4>{this.state.date}</h4>
        <h4>{this.state.file}</h4>
      </div>
    )
  }
}

export default Exploit;
